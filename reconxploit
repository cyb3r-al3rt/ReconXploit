#!/bin/bash
# ReconXploit v3.0 - Working Launcher Script

# Get script directory
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
cd "$SCRIPT_DIR"

# Colors for output
GREEN='\033[0;32m'
RED='\033[0;31m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m'

echo -e "${BLUE}[INFO]${NC} ReconXploit Launcher - Starting from: $SCRIPT_DIR"

# Check for virtual environment
if [[ ! -f "venv/bin/activate" ]]; then
    echo -e "${RED}[ERROR]${NC} Python virtual environment not found!"
    echo -e "${YELLOW}[FIX]${NC} Run: python3 -m venv venv && source venv/bin/activate && pip install colorama pyyaml requests aiohttp"
    exit 1
fi

# Activate virtual environment
echo -e "${BLUE}[INFO]${NC} Activating Python virtual environment..."
source venv/bin/activate

# Set up environment
export PATH="$PATH:$HOME/go/bin:$HOME/.cargo/bin"
export PYTHONPATH="$SCRIPT_DIR:$PYTHONPATH"

# Check if core module exists
if [[ ! -f "core/reconxploit.py" ]]; then
    echo -e "${RED}[ERROR]${NC} ReconXploit core module not found!"
    echo -e "${YELLOW}[FIX]${NC} Ensure core/reconxploit.py exists"
    exit 1
fi

# Launch ReconXploit
echo -e "${GREEN}[SUCCESS]${NC} Launching ReconXploit v3.0..."
exec python3 core/reconxploit.py "$@"
